# Shortcodes

This project uses a small set of Hugo shortcodes for post content.

## Mermaid

Use for flowcharts/diagrams:

```text
{{< mermaid >}}
graph TD
  A[Write Post] --> B[Build Site]
{{< /mermaid >}}
```

Notes:

- Mermaid is loaded from jsDelivr as ESM (`mermaid@11`).
- Rendering is theme-aware and re-renders on dark/light switch.
- Runtime wiring uses the shared plugin framework (`static/js/content-tools.js` + `static/js/mermaid-init.js`).
- Diagrams fit the content width by default (no horizontal scroll by default).
- Diagrams can be opened in the global media zoom overlay (same interaction as post images).

## Asciinema

Use for terminal recordings:

```text
{{< asciinema key="hugo-new-site" rows="15" autoplay="1" loop="1" >}}
```

Cast path convention:

```text
static/casts/<key>.cast
```

Implementation notes:

- Markup is generated by `layouts/shortcodes/asciinema.html`.
- Runtime initialization is handled by the shared plugin framework (`static/js/content-tools.js` + `static/js/asciinema-init.js`).
- Asciinema player assets are loaded from jsDelivr CDN (`asciinema-player@3`).

## Notice

Use for callouts:

```text
{{< notice info >}}Info message{{< /notice >}}
{{< notice warning >}}Warning message{{< /notice >}}
```

## Figure

Use for images with optional caption:

```text
{{< figure src="about_image.jpg" alt="Profile photo" >}}
{{< figure src="diagram.png" alt="Architecture diagram" caption="Current architecture." >}}
```

Implementation notes:

- Markup is rendered by `layouts/shortcodes/figure.html`.
- Images use `loading="lazy"` and `decoding="async"` by default.
- When the image exists in the page bundle, intrinsic `width` and `height` are emitted to reduce layout shift.

## Recent Posts

Use to render recent posts on a page:

```text
{{< recentposts >}}
```

## Related Docs

- `docs/plugins.md` for runtime/plugin architecture
